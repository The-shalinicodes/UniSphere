<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Club Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="dashboard.html">
                <i class="fas fa-users me-2"></i>Club Management System
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="dashboard.html">
                            <i class="fas fa-tachometer-alt me-1"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user me-1"></i> John Doe
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#profileModal">My Profile</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="index.html">Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar d-md-block">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" href="dashboard.html">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="members.html">
                            <i class="fas fa-user-friends"></i> Members
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="events.html">
                            <i class="fas fa-calendar-alt"></i> Events
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="id-cards.html">
                            <i class="fas fa-id-card"></i> ID Cards
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="announcements.html">
                            <i class="fas fa-bullhorn"></i> Announcements
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="reports.html">
                            <i class="fas fa-chart-bar"></i> Reports
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="renewals.html">
                            <i class="fas fa-sync-alt"></i> Renewals
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Main Content Area -->
            <main class="col-md-9 col-lg-10 content-area">
                <div class="page-header">
                    <h2>Dashboard</h2>
                    <p class="text-muted">Welcome back, John! Here's what's happening with your club today.</p>
                </div>

                <div class="row">
                    <div class="col-md-3 mb-4">
                        <div class="card stats-card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="card-title text-muted">TOTAL MEMBERS</h6>
                                        <h3 class="dashboard-stats" id="totalMembers">0</h3>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-users fa-2x text-primary"></i>
                                    </div>
                                </div>
                                <p class="card-text"><span class="text-success" id="memberChange">+0%</span> from last month</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card stats-card success">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="card-title text-muted">ACTIVE EVENTS</h6>
                                        <h3 class="dashboard-stats" id="activeEvents">0</h3>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-calendar-check fa-2x text-success"></i>
                                    </div>
                                </div>
                                <p class="card-text"><span class="text-success" id="eventChange">+0</span> upcoming events</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card stats-card warning">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="card-title text-muted">PENDING RENEWALS</h6>
                                        <h3 class="dashboard-stats" id="pendingRenewals">0</h3>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-exclamation-circle fa-2x text-warning"></i>
                                    </div>
                                </div>
                                <p class="card-text"><span class="text-danger" id="renewalChange">-0%</span> from last month</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-4">
                        <div class="card stats-card danger">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <h6 class="card-title text-muted">REVENUE</h6>
                                        <h3 class="dashboard-stats" id="totalRevenue">$0</h3>
                                    </div>
                                    <div class="align-self-center">
                                        <i class="fas fa-dollar-sign fa-2x text-danger"></i>
                                    </div>
                                </div>
                                <p class="card-text"><span class="text-success" id="revenueChange">+0%</span> from last month</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header">
                                Recent Activities
                            </div>
                            <div class="card-body">
                                <div id="recentActivities">
                                    <p class="text-center text-muted">No recent activities</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                Upcoming Events
                            </div>
                            <div class="card-body" id="upcomingEvents">
                                <p class="text-center text-muted">No upcoming events</p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Profile Modal -->
    <div class="modal fade" id="profileModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">My Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <img src="https://i.pravatar.cc/100" class="rounded-circle" alt="Profile Picture">
                        <h4 class="mt-2">John Doe</h4>
                        <p class="text-muted">Administrator</p>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" value="john.doe@example.com" readonly>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Phone</label>
                        <input type="text" class="form-control" value="(555) 123-4567">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Role</label>
                        <input type="text" class="form-control" value="Club Administrator" readonly>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <script>
        // Load dashboard data
        document.addEventListener('DOMContentLoaded', function() {
            loadDashboardData();
        });
        
        function loadDashboardData() {
            // In a real application, this would be an API call
            // For demo, we'll use localStorage or default values
            
            const members = JSON.parse(localStorage.getItem('members')) || [];
            const events = JSON.parse(localStorage.getItem('events')) || [];
            const renewals = JSON.parse(localStorage.getItem('renewals')) || [];
            
            // Update stats
            document.getElementById('totalMembers').textContent = members.length;
            document.getElementById('activeEvents').textContent = events.filter(e => new Date(e.date) >= new Date()).length;
            document.getElementById('pendingRenewals').textContent = renewals.filter(r => r.status === 'Pending').length;
            document.getElementById('totalRevenue').textContent = '$' + (members.length * 50); // Simple calculation
            
            // Update recent activities
            const activitiesContainer = document.getElementById('recentActivities');
            if (members.length > 0) {
                let activitiesHTML = '<div class="table-responsive"><table class="table table-hover"><tbody>';
                
                // Show last 5 members as activities
                const recentMembers = members.slice(-5).reverse();
                recentMembers.forEach(member => {
                    activitiesHTML += `
                        <tr>
                            <td>${member.name}</td>
                            <td>New Membership</td>
                            <td>${new Date(member.joinDate).toLocaleDateString()}</td>
                            <td><span class="badge bg-success">Completed</span></td>
                        </tr>
                    `;
                });
                
                activitiesHTML += '</tbody></table></div>';
                activitiesContainer.innerHTML = activitiesHTML;
            }
            
            // Update upcoming events
            const eventsContainer = document.getElementById('upcomingEvents');
            const upcomingEvents = events.filter(e => new Date(e.date) >= new Date()).slice(0, 3);
            
            if (upcomingEvents.length > 0) {
                let eventsHTML = '';
                upcomingEvents.forEach(event => {
                    const eventDate = new Date(event.date);
                    eventsHTML += `
                        <div class="d-flex mb-3">
                            <div class="event-date">
                                <div class="fw-bold">${eventDate.getDate()}</div>
                                <div>${eventDate.toLocaleString('default', { month: 'short' }).toUpperCase()}</div>
                            </div>
                            <div>
                                <h6>${event.title}</h6>
                                <p class="text-muted small">${event.time}</p>
                            </div>
                        </div>
                    `;
                });
                eventsContainer.innerHTML = eventsHTML;
            }
        }
    </script>
</body>
</html>